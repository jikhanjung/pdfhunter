# Constraints

## 기술적 제약

- **Python 3.11+**: 모든 코드는 Python 3.11 이상에서 동작해야 한다.
- **OCR 엔진**: PaddleOCR을 기본 엔진으로 사용한다. Tesseract는 선택적 대안이다.
- **LLM API 의존**: OpenAI 또는 Anthropic API 키가 필요하다. 테스트 시 Mock LLM으로 대체 가능하다.
- **페이지 선택 제한**: OCR 비용 절감을 위해 기본적으로 p1, p2, last만 처리한다. 확장 탐색도 제한적이다.
- **에이전트 루프 반복 제한**: 무한 루프 방지를 위해 최대 반복 횟수를 제한한다.

## 데이터 제약

- **대상 언어**: EN, FR, RU 3개 언어를 우선 지원한다.
- **대상 문서 유형**: 학술 논문(저널 논문, 기관 총서/시리즈, 단행본/보고서)에 특화한다.
- **대상 분야**: 고생물학, 지질학 등 구 논문 비중이 높은 분야를 우선 고려한다.

## 설계 제약

- **Evidence 필수**: 모든 추출 필드는 반드시 근거(evidence)와 함께 저장해야 한다.
- **Provenance 기록**: 최종 채택된 값은 출처(source), 신뢰도(confidence), 근거를 포함해야 한다.
- **행동/판단 레이어 분리**: Agent Flow(행동)와 Decision Policy(판단)는 별도 문서/모듈로 분리한다.
- **Confidence 임계값**: 기본 0.75이며, 운영 데이터로 튜닝이 필요하다.

## 운영 제약

- **Crossref Override**: Crossref 결과가 존재하고 title+author+year가 합리적으로 일치하면 Crossref 값을 최종 값으로 채택한다.
- **실패는 상태**: 추출 실패는 오류가 아니라 `failed` 상태로 기록하고, 수동 처리로 전환한다.
